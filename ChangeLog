2007-01-23  Matthieu Lemerre  <racin@free.fr>

	Another cleanup pass.

	* src/objects/type.h: Removed file.
	* src/objects/pair.c: Cleaned up all useless functions.
	* src/objects/symbol.c: Likewise.
	
	* src/compiler/generate.c (struct_accessor): Likewise.
	* src/compiler/analysis.c (init_analysis): Remove useless declaration.
	* src/parser/form.c: Likewise.


2007-01-22  Matthieu Lemerre  <racin@free.fr>

	Little additional cleanup.

	* src/objects/fixnum.c : File removed.
        * src/objects/fixnum.h : File removed.
        * src/objects/function.c : File removed.
        * src/objects/object.h : File removed.
        * src/objects/string.c : File removed.

	Fixed includes.


2007-01-22  Matthieu Lemerre  <racin@free.fr>

	Cleaned up the type handling.
	
	* src/compiler/type.c (type_hash): removed hash table.
	(make_type): Now quits properly when given an unknown type.
	(intern_type): Removed the special case that used the type_hash.
	(TYPE): New function.
	(define_type_type_form): New function.
	(define_type_string): New function.
	* src/include/l/type.h (TYPE): Removed macro. Added TYPE function.

	* src/compiler/generate.c: Use new function TYPE.  Replaced int by
	Int, void by Void.
	* src/compiler/jit/backend.c (free_location): Likewise.
	* src/compiler/jit/operations.c : Likewise.
	* src/parser/form.c: Likewise.
	* src/std/list.c: Likewise.
	* src/std/output.c: Likewise.
	* src/std/print.c: Likewise.
	* src/std/xml.c: Likewise.
	* test/cocyte12-structures.l: Likewise.
	* test/cocyte15-rec-types.l: Likewise.
	
	* src/objects/object.h (CREATE_OBJECT): Removed use of TYPE.
	* src/objects/symbol.h: Likewise.
	* src/objects/type.h: Likewise.
	
	* src/compiler/c-to-l.h (DEFINE_TYPE_SYMBOL, DEFINE_TYPE): Removed
	macros.
	* src/compiler/analysis.c (init_analysis): Replace DEFINE_TYPE by
	define_type_string.
	(define_type_alias): Triggers a panic.
	(define_type): Uses define_type_type_form.

2007-01-20  Matthieu Lemerre  <racin@free.fr>

	* src/parser/parse.c (parse): New parser entry point, takes a
	String argument.
	(parse_file): Removed function.
	Fixed header parse.h

	* src/include/l/string.h (make_heap_string): Changed to have a
	trailing 0.
	
	* src/main.c (main): Now calls eval_file.
	(maken_heap_string): Same thing.
	* src/eval.c (eval): New file.
	* src/Makefile.am (L_SOURCES): added eval.c

2007-01-18  Matthieu Lemerre  <racin@free.fr>

	* src/std/print.c : New file.
	* src/std/output.c: New file.
	* src/std/init_library.c (init_library): Calls also init_output() and init_print()
	* src/std/Makefile.am (libl_std_la_SOURCES): added output.c and print.c

	* src/parser/parse.c (l_parse_statement): New function
	* src/parser/buffer.h : Changed inline functions to static inline.
	* src/include/l/std/output.h: New file.
	* src/include/l/string.h (struct string): a String and its content
	are not forced to be allocated at the same place; fixed other
	files to take this into account.

	* src/expander/expand.c (expand_block): Added a check on blocks not being empty.
	* src/compiler/c-to-l.h: added the TYPE_ macro
	* src/Makefile.am (L_LDADD): Added -lm

2007-01-17  Matthieu Lemerre  <racin@free.fr>

	* src/parser/form.c (lispify_rec): Use string_t instead of char *.

2007-01-14  Matthieu Lemerre  <racin@free.fr>

	* src/include/type.h : New location for the old compiler/type.h
	file.
	* src/include/string.h : New string structure.
	* src/objects/string.h: Removed file
	* src/compiler/type.h: Removed file
	All including files changes.
	
	* src/std/xml.c: Use string_t instead of char *.
	* src/parser/parse.c (get_next_token): Now creates a string_t
	* src/parser/form.c (string_form): Now takes a string_t instead of
	char *.

2007-01-13  Matthieu Lemerre  <racin@free.fr>

	* doc: New directory, holding L's documentation.
	* configure.in: Added doc/Makefile
	* Makefile.am: Added doc

2007-01-06  Matthieu Lemerre  <racin@free.fr>

	* Initial public release

